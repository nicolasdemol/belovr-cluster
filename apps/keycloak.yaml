apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: keycloak
  namespace: argocd
spec:
  project: belovr

  source:
    repoURL: oci://registry-1.docker.io/bitnamicharts/keycloak
    targetRevision: "25.2.0"
    path: .
    helm:
      valuesObject:
        image:
          registry: docker.io
          repository: bitnamilegacy/keycloak
          tag: latest

        auth:
          adminUser: admin
          adminPassword: "adminpass"
        
        postgresql:
          enabled: true
          image:
            registry: docker.io
            repository: bitnami/postgresql
            tag: latest
          auth:
            username: keycloak
            password: keycloakpass
            database: keycloak

  destination:
    server: https://kubernetes.default.svc
    namespace: belovr
