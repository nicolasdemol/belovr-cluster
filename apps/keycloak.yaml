apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: keycloak
  namespace: argocd
spec:
  project: belovr

  source:
    repoURL: oci://registry-1.docker.io/bitnamicharts/keycloak
    targetRevision: "25.2.0"
    path: .
    helm:
      valuesObject:
        image:
          registry: docker.io
          repository: keycloak/keycloak
          tag: 26.4

        auth:
          adminUser: admin
          adminPassword: "adminpass"

        postgresql:
          enabled: true
          image:
            registry: docker.io
            repository: postgres
            tag: sha256:00bc86618629af00d2937fdc5a5d63db3ff8450acf52f0636ec813c7f4902929
          auth:
            username: keycloak
            password: keycloakpass
            database: keycloak

  destination:
    server: https://kubernetes.default.svc
    namespace: belovr
